<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Element中select自定义过滤函数 | Barry7的个人博客</title>
    <meta name="description" content="欢迎来到Barry7的个人博客">
    
    
    <link rel="preload" href="/assets/css/0.styles.5203916d.css" as="style"><link rel="preload" href="/assets/js/app.4184c4e1.js" as="script"><link rel="preload" href="/assets/js/2.3b1e7183.js" as="script"><link rel="preload" href="/assets/js/3.c643f2be.js" as="script"><link rel="prefetch" href="/assets/js/10.1476eed9.js"><link rel="prefetch" href="/assets/js/11.c991df82.js"><link rel="prefetch" href="/assets/js/12.234adfe3.js"><link rel="prefetch" href="/assets/js/13.60741dd3.js"><link rel="prefetch" href="/assets/js/4.46b713c8.js"><link rel="prefetch" href="/assets/js/5.d0d7519f.js"><link rel="prefetch" href="/assets/js/6.30e5ef7d.js"><link rel="prefetch" href="/assets/js/7.36f4a970.js"><link rel="prefetch" href="/assets/js/8.3f97aae5.js"><link rel="prefetch" href="/assets/js/9.4fd2cbf2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5203916d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Barry7的个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/barry7" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/barry7" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端开发分享</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/" class="sidebar-link">列表</a></li><li><a href="/frontend/largeList.html" class="sidebar-link">超大列表性能优化</a></li><li><a href="/frontend/select.html" class="active sidebar-link">Element中select自定义过滤函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/select.html#引言" class="sidebar-link">引言</a></li><li class="sidebar-sub-header"><a href="/frontend/select.html#变通方案" class="sidebar-link">变通方案</a></li><li class="sidebar-sub-header"><a href="/frontend/select.html#思考" class="sidebar-link">思考</a></li><li class="sidebar-sub-header"><a href="/frontend/select.html#源码" class="sidebar-link">源码</a></li><li class="sidebar-sub-header"><a href="/frontend/select.html#实现自己的函数" class="sidebar-link">实现自己的函数</a></li><li class="sidebar-sub-header"><a href="/frontend/select.html#结果" class="sidebar-link">结果</a></li><li class="sidebar-sub-header"><a href="/frontend/select.html#性能" class="sidebar-link">性能</a></li><li class="sidebar-sub-header"><a href="/frontend/select.html#原因分析" class="sidebar-link">原因分析</a></li><li class="sidebar-sub-header"><a href="/frontend/select.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/frontend/select2.html" class="sidebar-link">Element中select自定义过滤属性</a></li><li><a href="/frontend/VUE-SSR.html" class="sidebar-link">简单的服务端渲染</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="element中select自定义过滤函数"><a href="#element中select自定义过滤函数" aria-hidden="true" class="header-anchor">#</a> Element中select自定义过滤函数</h1> <h2 id="引言"><a href="#引言" aria-hidden="true" class="header-anchor">#</a> 引言</h2> <p>Element中的el-select组件使用非常方便。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-select</span>
    <span class="token attr-name">filterable</span>
    <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>请选择<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-option</span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item in options<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.value<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.label<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-option</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>像这样，就可以实现一个简单的选择器，并且带有输入框可以
根据用户输入过滤选项。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        value<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'苹果'</span><span class="token punctuation">,</span>key<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'梨子'</span><span class="token punctuation">,</span>key<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'菠萝'</span><span class="token punctuation">,</span>key<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'香蕉'</span><span class="token punctuation">,</span>key<span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>但是有一个问题，默认的选择器只会根据label过滤内容，
如果我希望根据options中其他属性过滤应该怎么办呢？</p> <h2 id="变通方案"><a href="#变通方案" aria-hidden="true" class="header-anchor">#</a> 变通方案</h2> <p>网上许多博客给出了一种变通的方案：绑定另一个数组。<br>
代码如下：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-select</span>
    <span class="token attr-name">filterable</span>
    <span class="token attr-name">:filter-method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>filterMethod<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>请选择<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-option</span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item in otherOptions<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.value<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.label<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-option</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>仔细看会发现，这时候v-for中遍历的不是原来的option了，
接着看js代码</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      value<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'苹果'</span><span class="token punctuation">,</span>eng<span class="token punctuation">:</span><span class="token string">'pingguo'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'梨子'</span><span class="token punctuation">,</span>eng<span class="token punctuation">:</span><span class="token string">'lizi'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'菠萝'</span><span class="token punctuation">,</span>eng<span class="token punctuation">:</span><span class="token string">'boluo'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'香蕉'</span><span class="token punctuation">,</span>eng<span class="token punctuation">:</span><span class="token string">'xiangjiao'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token function">filterMethod</span><span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>otherOptions <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token punctuation">(</span>item<span class="token punctuation">.</span>label <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>label<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span>
            <span class="token punctuation">(</span>item<span class="token punctuation">.</span>eng <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>eng<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>otherOptions <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>上述代码中，query是输入框中内容。<br>
这个逻辑也很简单，当输入内容的时候判断是否有过滤条件query，
如果没有那么otherOptions就是所有的options，
如果有，那么对item中label和eng属性做判断，如果符合条件，
则将这个item加入otherOptions。<br>
GIF</p> <h2 id="思考"><a href="#思考" aria-hidden="true" class="header-anchor">#</a> 思考</h2> <p>本来这样就可以正常使用了，但是如果数组比较大，
那么每次输入，都要遍历一遍整个数组吗？<br>
Element本身就可以对options进行筛选，他是怎么实现的呢？<br>
根据<a href="https://github.com/ElemeFE/element/blob/master/.github/CONTRIBUTING.zh-CN.md" target="_blank" rel="noopener noreferrer">element官方的指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，
首先clone下来，所有组件都在<code>package</code>目录下，通过修改<code>examples/play/index.vue</code>文件可以快速看到结果。<br>
修改后可以通过<code>npm run dev:play</code>并访问<a href="http:localhost:8085" target="_blank" rel="noopener noreferrer">http:localhost:8085<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>查看修改结果。</p> <h2 id="源码"><a href="#源码" aria-hidden="true" class="header-anchor">#</a> 源码</h2> <p>既然我们要研究的是select模块，那我们打开<code>package/select.vue</code>，一共八百多行代码，这次我们不需要全部阅读。<br>
在上面模板中，看到其中包含了许多内容，而我关心的只是官方是如何操作“每次输入触发过滤器进行过滤”的。<br>
所以我在打开<code>http:localhost:8085</code>，通过开发者工具找到了相关的HTML代码。如下：</p> <div align="center"><img src="data:image/png;base64,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"></div> <p>可以看到，这里有一个<code>&lt;input&gt;</code>，去<code>select.vue</code>中查找，找到如下定义：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
    <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>el-select__input<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>[selectSize ? `is-${ selectSize }` : '']<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>selectDisabled<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:autocomplete</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>autoComplete || autocomplete<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@focus</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>handleFocus<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@blur</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>softFocus = false<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@click.stop</span>
    <span class="token attr-name">@keyup</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>managePlaceholder<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@keydown</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>resetInputState<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@keydown.down.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>navigateOptions('next')<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@keydown.up.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>navigateOptions('prev')<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@keydown.enter.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>selectOption<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@keydown.esc.stop.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>visible = false<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@keydown.delete</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>deletePrevTag<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@compositionstart</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>handleComposition<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@compositionupdate</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>handleComposition<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@compositionend</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>handleComposition<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>query<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>debouncedQueryChange<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>filterable<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token punctuation">{</span> <span class="token string">'flex-grow'</span><span class="token punctuation">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token property">width</span><span class="token punctuation">:</span> inputLength / <span class="token punctuation">(</span>inputWidth - 32<span class="token punctuation">)</span> </span>
<span class="token attr-value">    + <span class="token string">'%'</span><span class="token punctuation">,</span> <span class="token string">'max-width'</span><span class="token punctuation">:</span> inputWidth - 42 + <span class="token string">'px'</span> <span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>于是我们发现：</p> <ol><li>需要<code>filterable</code>存在才会渲染这个input</li> <li>input绑定了query</li> <li>input事件会触发debouncedQueryChange函数，看名字，作用
大概是防抖触发QueryChange<br>
那么我们自然要去看一下<code>debouncedQueryChange</code>具体是什么样了。</li></ol> <p>跳转到函数定义处，查看代码。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>debouncedQueryChange <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>debounce<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleQueryChange</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>继续查看handleQueryChange。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">handleQueryChange</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>previousQuery <span class="token operator">===</span> val <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isOnComposition<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>previousQuery <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>
    <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>filterMethod <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">||</span> 
    <span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>remoteMethod <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>previousQuery <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>previousQuery <span class="token operator">=</span> val<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>visible<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">broadcast</span><span class="token punctuation">(</span><span class="token string">'ElSelectDropdown'</span><span class="token punctuation">,</span> <span class="token string">'updatePopper'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>hoverIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>multiple <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>filterable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> length <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>input<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">15</span> <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>inputLength <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>collapseTags <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span> <span class="token punctuation">:</span> length<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">managePlaceholder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetInputHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>remote <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>remoteMethod <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hoverIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remoteMethod</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>filterMethod <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filterMethod</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">broadcast</span><span class="token punctuation">(</span><span class="token string">'ElOptionGroup'</span><span class="token punctuation">,</span> <span class="token string">'queryChange'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>filteredOptionsCount <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>optionsCount<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">broadcast</span><span class="token punctuation">(</span><span class="token string">'ElOption'</span><span class="token punctuation">,</span> <span class="token string">'queryChange'</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">broadcast</span><span class="token punctuation">(</span><span class="token string">'ElOptionGroup'</span><span class="token punctuation">,</span> <span class="token string">'queryChange'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>defaultFirstOption <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>filterable <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>remote<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> 
  <span class="token keyword">this</span><span class="token punctuation">.</span>filteredOptionsCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkDefaultFirstOption</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>代码比较长，慢慢来看。<br>
前半部分是一些判断，用途应该是减少执行次数、提高性能。<br>
第24行开始才是本文的重点：24行判断了filterMethod是否为function，
如果我们传入自定义的函数，就会在25行执行。<br>
27行进入else，也就是如果没有传入自定义函数，进入28-30行，
29、30行执行了broadcast函数，我们继续跟踪，去看下这个函数有什么用。
发现这个函数定义在<code>src/mixins/emitter.js</code>中，应该是个公用函数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">broadcast</span><span class="token punctuation">(</span><span class="token parameter">componentName<span class="token punctuation">,</span> eventName<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> child<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>componentName<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> componentName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      child<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> <span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">broadcast</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> <span class="token punctuation">[</span>componentName<span class="token punctuation">,</span> eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>params<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>大概作用是向指定的子组件遍历“广播”。
29行指定了向<code>ElOption</code>广播<code>queryChange</code>，并且带着<code>val</code>参数。
那么我们自然要去<code>ElOption</code>中看一下具体发生了什么。<br>
进入同级<code>option.vue</code>。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span>
    <span class="token attr-name">@mouseenter</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hoverItem<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@click.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>selectOptionClick<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>el-select-dropdown__item<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>visible<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{
      'selected': itemSelected,
      'is-disabled': disabled || groupDisabled || limitReached,
      'hover': hover
    }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ currentLabel }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>下面是JavaScript代码，已经删去部分无关代码。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      value<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        required<span class="token punctuation">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      disabled<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> Boolean<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        index<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
        visible<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token function">queryChange</span><span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token function">escapeRegexpString</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentLabel<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>created<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>visible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>select<span class="token punctuation">.</span>filteredOptionsCount<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'queryChange'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queryChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>代码比较简单。刚才广播了<code>queryChange</code>，那我们找一下。
在<code>created()</code>中发现，广播<code>queryChange</code>时会执行<code>queryChange</code>。
其中<code>queryChange</code>在19行，<code>query</code>是传入的查询条件。<br>
代码中通过正则的方式，判断query是否包含在本组件的<code>currentLabel</code>中，
然后修改<code>this.visible</code>来控制显示或隐藏。<br>
这也符合正常思路：用户进行筛选的时候，除非是远程动态获取options，否则
options本体应该不变，变化的只是结果。
像我们上面的<a href="/frontend/select.html#变通方案">变通方案</a>，
在每一次输入时都有可能改变v-for所绑定的数据，然后触发reflow，实在是南辕北辙。</p> <h2 id="实现自己的函数"><a href="#实现自己的函数" aria-hidden="true" class="header-anchor">#</a> 实现自己的函数</h2> <p>既然整个流程了解了，那么实现起来也很容易，
让<code>select</code>组件进行自己的广播，比如广播<code>myQueryChange</code>，
<code>option</code>组件听到广播后执行自己的函数<code>myQueryChange()</code>来动态修改<code>option.visible</code>。
于是我们回到<code>index.vue</code>，编写我们自己的filterMethod。<br>
初步想法是传入val，然后根据val修改visible。<br>
假设我们的数据结构是</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>data<span class="token punctuation">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'苹果'</span><span class="token punctuation">,</span>eng<span class="token punctuation">:</span><span class="token string">'apple'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'梨子'</span><span class="token punctuation">,</span>eng<span class="token punctuation">:</span><span class="token string">'pear'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'菠萝'</span><span class="token punctuation">,</span>eng<span class="token punctuation">:</span><span class="token string">'pineapple'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>label<span class="token punctuation">:</span><span class="token string">'香蕉'</span><span class="token punctuation">,</span>eng<span class="token punctuation">:</span><span class="token string">'banana'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>我们想让用户无论输入中文还是英文都能返回相应的数据。函数如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">filterMethod</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">that</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token function-variable function">fn</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">query<span class="token punctuation">,</span>that</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      that<span class="token punctuation">.</span>visible <span class="token operator">=</span> that<span class="token punctuation">.</span>myItem<span class="token punctuation">.</span>eng<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">||</span>
      that<span class="token punctuation">.</span>myItem<span class="token punctuation">.</span>label<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>that<span class="token punctuation">.</span>visible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        that<span class="token punctuation">.</span>select<span class="token punctuation">.</span>filteredOptionsCount<span class="token operator">--</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    that<span class="token punctuation">.</span><span class="token function">broadcast</span><span class="token punctuation">(</span><span class="token string">'ElOption'</span><span class="token punctuation">,</span> <span class="token string">'myQueryChange'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>val<span class="token punctuation">,</span>fn<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>返回一个匿名函数，函数传入that，在这里充当原函数的this，将我们自己的<code>filterMethod</code>
绑定<code>:filter-method=&quot;filterMethod&quot;</code><br>
进入<code>select.vue</code>，继续修改。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>filterMethod <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> method <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filterMethod</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">method</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">broadcast</span><span class="token punctuation">(</span><span class="token string">'ElOptionGroup'</span><span class="token punctuation">,</span> <span class="token string">'queryChange'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>修改之前代码25行的位置，如果传入了<code>filterMethod</code>，我们将此时的this传给他。
这里将会执行</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>that<span class="token punctuation">.</span><span class="token function">broadcast</span><span class="token punctuation">(</span><span class="token string">'ElOption'</span><span class="token punctuation">,</span> <span class="token string">'myQueryChange'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>val<span class="token punctuation">,</span>fn<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>并且将val和fn通过广播传播出去，其中fn()就是我们自定义的业务代码。
到了<code>option.vue</code>中，监听广播<code>myQueryChange</code>，然后触发自己的函数</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">myQueryChange</span><span class="token punctuation">(</span><span class="token parameter">query<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fn</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这里我们简单的执行<code>fn()</code>即可。记得传入query和that哦。</p> <h2 id="结果"><a href="#结果" aria-hidden="true" class="header-anchor">#</a> 结果</h2> <p>然后尝试一下？<br></p><div align="center"><img src="/assets/img/select_1.6cc7aac6.gif"><br></div><p></p> <p>实现了我们需要的功能。</p> <h2 id="性能"><a href="#性能" aria-hidden="true" class="header-anchor">#</a> 性能</h2> <p>有个有趣的问题：如果这个option非常大怎么办呢？<br>
那我们试一下呗！<br>
我们先写一个函数用于生成<code>options</code>。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">optionsGenerator</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> ops <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> oddEven <span class="token operator">=</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'even'</span> <span class="token punctuation">:</span> <span class="token string">'odd'</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> op <span class="token operator">=</span> <span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">'用户'</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> eng<span class="token punctuation">:</span> <span class="token string">'user-'</span> <span class="token operator">+</span> oddEven<span class="token punctuation">}</span><span class="token punctuation">;</span>
        ops<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>op<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ops<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> ops <span class="token operator">=</span> <span class="token function">optionsGenerator</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> 
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        value<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        optionFilter<span class="token punctuation">:</span><span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token function">oldFilterMethod</span><span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>optionFilter <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token punctuation">(</span>
               <span class="token punctuation">(</span>item<span class="token punctuation">.</span>label <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>label<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span>
               <span class="token punctuation">(</span>item<span class="token punctuation">.</span>eng <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>eng<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
             <span class="token punctuation">)</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span>
           <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
             <span class="token keyword">this</span><span class="token punctuation">.</span>optionFilter <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options
           <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> ops
    <span class="token keyword">this</span><span class="token punctuation">.</span>optionFilter <span class="token operator">=</span> ops
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>在<code>mounted()</code>中将生成的数据赋给options和optionsFilter，
通过改变<code>optionsFilter</code>来改变下拉框的数据。<br>
在数据量不大的时候，速度都很快，那么如果数据有一万条呢？
</p><div align="center"><img src="/assets/img/old_function.17ceba83.gif"><br></div>
可以看到，每次输入、删除之后，都会有一段时间的卡顿，
那么如果使用我们上面的方法呢？<br>
结果如下：
<div align="center"><img src="/assets/img/new_function.8a3f4203.gif"><br></div><p></p> <h2 id="原因分析"><a href="#原因分析" aria-hidden="true" class="header-anchor">#</a> 原因分析</h2> <p>因为都是需要监听用户输入，在这一步都可以做防抖节流等操作，
真正的区别在于如何执行filterMethod方法。</p> <ul><li>变通方案中，绑定了一个新的数组，在一次执行过程中，
完整遍历了一次数组，然后VUE需要根据遍历结果再完整渲染一次列表，
时间复杂度为O(n)；</li> <li>而新方法中，虽然每次执行也是要完整遍历一次数组，时间复杂度也是O(n)，
但是不需要渲染原有的列表，只需要执行<code>option.visible=false</code>，
模板中<code>v-show=&quot;visible&quot;</code>，也就是说不需要的属性被隐藏了，
reflow的开销较小。</li></ul> <h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <p>本次性能优化效果很明显，主要的性能瓶颈不在于JavaScript的执行，
而在浏览器的渲染上，可以看出，如何减少回流和重绘，
是前端性能优化的一个重要方向。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/frontend/largeList.html" class="prev">
          超大列表性能优化
        </a></span> <span class="next"><a href="/frontend/select2.html">
          Element中select自定义过滤属性
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4184c4e1.js" defer></script><script src="/assets/js/2.3b1e7183.js" defer></script><script src="/assets/js/3.c643f2be.js" defer></script>
  </body>
</html>
